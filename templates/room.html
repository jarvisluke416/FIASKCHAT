{% extends 'base.html' %}

{% block content %}

<button class="roommodebutton" id="mode-toggle">
  <img id="mode-icon" src="https://5fc98fa113f6897cea53-06dfa63be377ed632ae798753ae0fb3f.ssl.cf2.rackcdn.com/product_images/files/000/181/481/legacy_product_detail_large/data?1681938205" width="40" alt="Toggle Mode">
</button>
<div class="users">Users</div>

<div class="chat-container">
  <div class="user-list">
    <ul id="user-list"></ul>
  </div>

  <div class="message-box">
    <h2>Chat Room: <p>{{ code }}</p></h2>
    <div class="messages" id="messages"></div>
  
    <!-- Emoji button to toggle emoji container visibility -->
    <button id="emojiBtn">ğŸ˜Š</button>
    <div id="emojiContainer" style="display: none;">
      <button class="emoji-btn">ğŸ˜Š</button>
      <button class="emoji-btn">ğŸ˜‚</button>
      <button class="emoji-btn">â¤ï¸</button>
      <button class="emoji-btn">ğŸ‘</button>
      <button class="emoji-btn">ğŸ˜</button>
      <button class="emoji-btn">ğŸ˜€</button>
<button class="emoji-btn">ğŸ˜ƒ</button>
<button class="emoji-btn">ğŸ˜„</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ˜†</button>
<button class="emoji-btn">ğŸ˜…</button>
<button class="emoji-btn">ğŸ˜‚</button>
<button class="emoji-btn">ğŸ¤£</button>
<button class="emoji-btn">ğŸ¥²</button>
<button class="emoji-btn">ğŸ¥¹</button>
<button class="emoji-btn">â˜ºï¸</button>
<button class="emoji-btn">ğŸ˜Š</button>
<button class="emoji-btn">ğŸ˜‡</button>
<button class="emoji-btn">ğŸ™‚</button>
<button class="emoji-btn">ğŸ™ƒ</button>
<button class="emoji-btn">ğŸ˜‰</button>
<button class="emoji-btn">ğŸ˜Œ</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ¥°</button>
<button class="emoji-btn">ğŸ˜˜</button>
<button class="emoji-btn">ğŸ˜—</button>
<button class="emoji-btn">ğŸ˜™</button>
<button class="emoji-btn">ğŸ˜š</button>
<button class="emoji-btn">ğŸ˜‹</button>
<button class="emoji-btn">ğŸ˜›</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ˜œ</button>
<button class="emoji-btn">ğŸ¤ª</button>
<button class="emoji-btn">ğŸ¤¨</button>
<button class="emoji-btn">ğŸ§</button>
<button class="emoji-btn">ğŸ¤“</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ¥¸</button>
<button class="emoji-btn">ğŸ¤©</button>
<button class="emoji-btn">ğŸ¥³</button>
<button class="emoji-btn">ğŸ™‚â€â†•ï¸</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ˜’</button>
<button class="emoji-btn">ğŸ™‚â€â†”ï¸</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ˜”</button>
<button class="emoji-btn">ğŸ˜Ÿ</button>
<button class="emoji-btn">ğŸ˜•</button>
<button class="emoji-btn">ğŸ™</button>
<button class="emoji-btn">â˜¹ï¸</button>
<button class="emoji-btn">ğŸ˜£</button>
<button class="emoji-btn">ğŸ˜–</button>
<button class="emoji-btn">ğŸ˜«</button>
<button class="emoji-btn">ğŸ˜©</button>
<button class="emoji-btn">ğŸ¥º</button>
<button class="emoji-btn">ğŸ˜¢</button>
<button class="emoji-btn">ğŸ˜­</button>
<button class="emoji-btn">ğŸ˜®â€ğŸ’¨</button>
<button class="emoji-btn">ğŸ˜¤</button>
<button class="emoji-btn">ğŸ˜ </button>
<button class="emoji-btn">ğŸ˜¡</button>
<button class="emoji-btn">ğŸ¤¬</button>
<button class="emoji-btn">ğŸ¤¯</button>
<button class="emoji-btn">ğŸ˜³</button>
<button class="emoji-btn">ğŸ¥µ</button>
<button class="emoji-btn">ğŸ¥¶</button>
<button class="emoji-btn">ğŸ˜±</button>
<button class="emoji-btn">ğŸ˜¨</button>
<button class="emoji-btn">ğŸ˜°</button>
<button class="emoji-btn">ğŸ˜¥</button>
<button class="emoji-btn">ğŸ˜“</button>
<button class="emoji-btn">ğŸ«£</button>
<button class="emoji-btn">ğŸ¤—</button>
<button class="emoji-btn">ğŸ«¡</button>
<button class="emoji-btn">ğŸ¤”</button>
<button class="emoji-btn">ğŸ«¢</button>
<button class="emoji-btn">ğŸ¤­</button>
<button class="emoji-btn">ğŸ¤«</button>
<button class="emoji-btn">ğŸ¤¥</button>
<button class="emoji-btn">ğŸ˜¶</button>
<button class="emoji-btn">ğŸ˜¶â€ğŸŒ«ï¸</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ˜‘</button>
<button class="emoji-btn">ğŸ˜¬</button>
<button class="emoji-btn">ğŸ«¨</button>
<button class="emoji-btn">ğŸ« </button>
<button class="emoji-btn">ğŸ™„</button>
<button class="emoji-btn">ğŸ˜¯</button>
<button class="emoji-btn">ğŸ˜¦</button>
<button class="emoji-btn">ğŸ˜§</button>
<button class="emoji-btn">ğŸ˜®</button>
<button class="emoji-btn">ğŸ˜²</button>
<button class="emoji-btn">ğŸ¥±</button>
<button class="emoji-btn">ğŸ˜´</button>
<button class="emoji-btn">ğŸ«©</button>
<button class="emoji-btn">ğŸ¤¤</button>
<button class="emoji-btn">ğŸ˜ª</button>
<button class="emoji-btn">ğŸ˜µ</button>
<button class="emoji-btn">ğŸ˜µâ€ğŸ’«</button>
<button class="emoji-btn">ğŸ«¥</button>
<button class="emoji-btn">ğŸ¤</button>
<button class="emoji-btn">ğŸ¥´</button>
<button class="emoji-btn">ğŸ¤¢</button>
<button class="emoji-btn">ğŸ¤®</button>
<button class="emoji-btn">ğŸ¤§</button>
<button class="emoji-btn">ğŸ˜·</button>
<button class="emoji-btn">ğŸ¤’</button>
<button class="emoji-btn">ğŸ¤•</button>
<button class="emoji-btn">ğŸ¤‘</button>
<button class="emoji-btn">ğŸ¤ </button>
<button class="emoji-btn">ğŸ˜ˆ</button>
<button class="emoji-btn">ğŸ‘¿</button>
<button class="emoji-btn">ğŸ‘¹</button>
<button class="emoji-btn">ğŸ‘º</button>
<button class="emoji-btn">ğŸ¤¡</button>
<button class="emoji-btn">ğŸ’©</button>
<button class="emoji-btn">ğŸ‘»</button>
<button class="emoji-btn">ğŸ’€</button>
<button class="emoji-btn">â˜ ï¸</button>
<button class="emoji-btn">ğŸ‘½</button>
<button class="emoji-btn">ğŸ‘¾</button>
<button class="emoji-btn">ğŸ¤–</button>
<button class="emoji-btn">ğŸƒ</button>
<button class="emoji-btn">ğŸ˜º</button>
<button class="emoji-btn">ğŸ˜¸</button>
<button class="emoji-btn">ğŸ˜¹</button>
<button class="emoji-btn">ğŸ˜»</button>
<button class="emoji-btn">ğŸ˜¼</button>
<button class="emoji-btn">ğŸ˜½</button>
<button class="emoji-btn">ğŸ™€</button>
<button class="emoji-btn">ğŸ˜¿</button>
<button class="emoji-btn">ğŸ˜¾</button>
<button class="emoji-btn">ğŸ‘‹</button>
<button class="emoji-btn">ğŸ¤š</button>
<button class="emoji-btn">ğŸ–</button>
<button class="emoji-btn">âœ‹</button>
<button class="emoji-btn">ğŸ––</button>
<button class="emoji-btn">ğŸ‘Œ</button>
<button class="emoji-btn">ğŸ¤Œ</button>
<button class="emoji-btn">ğŸ¤</button>
<button class="emoji-btn">âœŒï¸</button>
<button class="emoji-btn">ğŸ¤</button>
<button class="emoji-btn">ğŸ«°</button>
<button class="emoji-btn">ğŸ¤Ÿ</button>
<button class="emoji-btn">ğŸ¤˜</button>
<button class="emoji-btn">ğŸ¤™</button>
<button class="emoji-btn">ğŸ«µ</button>
<button class="emoji-btn">ğŸ«±</button>
<button class="emoji-btn">ğŸ«²</button>
<button class="emoji-btn">ğŸ«¸</button>
<button class="emoji-btn">ğŸ«·</button>
<button class="emoji-btn">ğŸ«³</button>
<button class="emoji-btn">ğŸ«´</button>
<button class="emoji-btn">ğŸ‘ˆ</button>
<button class="emoji-btn">ğŸ‘‰</button>
<button class="emoji-btn">ğŸ‘†</button>
<button class="emoji-btn">ğŸ–•</button>
<button class="emoji-btn">ğŸ‘‡</button>
<button class="emoji-btn">â˜ï¸</button>
<button class="emoji-btn">ğŸ‘</button>
<button class="emoji-btn">ğŸ‘</button>
<button class="emoji-btn">âœŠ</button>
<button class="emoji-btn">ğŸ‘Š</button>
<button class="emoji-btn">ğŸ¤›</button>
<button class="emoji-btn">ğŸ¤œ</button>
<button class="emoji-btn">ğŸ‘</button>
<button class="emoji-btn">ğŸ«¶</button>
<button class="emoji-btn">ğŸ™Œ</button>
<button class="emoji-btn">ğŸ‘</button>
<button class="emoji-btn">ğŸ¤²</button>
<button class="emoji-btn">ğŸ¤</button>
<button class="emoji-btn">ğŸ™</button>
<button class="emoji-btn">âœï¸</button>
<button class="emoji-btn">ğŸ’…</button>
<button class="emoji-btn">ğŸ¤³</button>
<button class="emoji-btn">ğŸ’ª</button>
<button class="emoji-btn">ğŸ¦¾</button>
<button class="emoji-btn">ğŸ¦µ</button>
<button class="emoji-btn">ğŸ¦¿</button>
<button class="emoji-btn">ğŸ¦¶</button>
<button class="emoji-btn">ğŸ‘£</button>
<button class="emoji-btn">ğŸ«†</button>
<button class="emoji-btn">ğŸ‘‚</button>
<button class="emoji-btn">ğŸ¦»</button>
<button class="emoji-btn">ğŸ‘ƒ</button>
<button class="emoji-btn">ğŸ«€</button>
<button class="emoji-btn">ğŸ«</button>
<button class="emoji-btn">ğŸ§ </button>
<button class="emoji-btn">ğŸ¦·</button>
<button class="emoji-btn">ğŸ¦´</button>
<button class="emoji-btn">ğŸ‘€</button>
<button class="emoji-btn">ğŸ‘</button>
<button class="emoji-btn">ğŸ‘…</button>
<button class="emoji-btn">ğŸ‘„</button>
<button class="emoji-btn">ğŸ«¦</button>
<button class="emoji-btn">ğŸ’‹</button>
<button class="emoji-btn">ğŸ©¸</button>
<button class="emoji-btn">ğŸ‘¶</button>
<button class="emoji-btn">ğŸ‘§</button>
<button class="emoji-btn">ğŸ§’</button>
<button class="emoji-btn">ğŸ‘¦</button>
<button class="emoji-btn">ğŸ‘©</button>
<button class="emoji-btn">ğŸ§‘</button>
<button class="emoji-btn">ğŸ‘¨</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ¦±</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ¦±</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ¦±</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ¦°</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ¦°</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ¦°</button>
<button class="emoji-btn">ğŸ‘±â€â™€ï¸</button>
<button class="emoji-btn">ğŸ‘±</button>
<button class="emoji-btn">ğŸ‘±â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ¦³</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ¦³</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ¦³</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ¦²</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ¦²</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ¦²</button>
<button class="emoji-btn">ğŸ§”â€â™€ï¸</button>
<button class="emoji-btn">ğŸ§”</button>
<button class="emoji-btn">ğŸ§”â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ‘µ</button>
<button class="emoji-btn">ğŸ§“</button>
<button class="emoji-btn">ğŸ‘´</button>
<button class="emoji-btn">ğŸ‘²</button>
<button class="emoji-btn">ğŸ‘³â€â™€ï¸</button>
<button class="emoji-btn">ğŸ‘³</button>
<button class="emoji-btn">ğŸ‘³â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ§•</button>
<button class="emoji-btn">ğŸ‘®â€â™€ï¸</button>
<button class="emoji-btn">ğŸ‘®</button>
<button class="emoji-btn">ğŸ‘®â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ‘·â€â™€ï¸</button>
<button class="emoji-btn">ğŸ‘·</button>
<button class="emoji-btn">ğŸ‘·â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ’‚â€â™€ï¸</button>
<button class="emoji-btn">ğŸ’‚</button>
<button class="emoji-btn">ğŸ’‚â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ•µï¸â€â™€ï¸</button>
<button class="emoji-btn">ğŸ•µï¸</button>
<button class="emoji-btn">ğŸ•µï¸â€â™‚ï¸</button>
<button class="emoji-btn">ğŸ‘©â€âš•ï¸</button>
<button class="emoji-btn">ğŸ§‘â€âš•ï¸</button>
<button class="emoji-btn">ğŸ‘¨â€âš•ï¸</button>
<button class="emoji-btn">ğŸ‘©â€ğŸŒ¾</button>
<button class="emoji-btn">ğŸ§‘â€ğŸŒ¾</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸŒ¾</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ³</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ³</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ³</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ“</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ“</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ“</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ¤</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ¤</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ¤</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ«</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ«</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ«</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ­</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ­</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ­</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ’»</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ’»</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ’»</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ’¼</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ’¼</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ’¼</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ”§</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ”§</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ”§</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ”¬</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ”¬</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ”¬</button>
<button class="emoji-btn">ğŸ‘©â€ğŸ¨</button>
<button class="emoji-btn">ğŸ§‘â€ğŸ¨</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸ¨</button>
<button class="emoji-btn">ğŸ‘©â€ğŸš’</button>
<button class="emoji-btn">ğŸ§‘â€ğŸš’</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸš’</button>
<button class="emoji-btn">ğŸ‘©â€âœˆï¸</button>
<button class="emoji-btn">ğŸ§‘â€âœˆï¸</button>
<button class="emoji-btn">ğŸ‘¨â€âœˆï¸</button>
<button class="emoji-btn">ğŸ‘©â€ğŸš€</button>
<button class="emoji-btn">ğŸ§‘â€ğŸš€</button>
<button class="emoji-btn">ğŸ‘¨â€ğŸš€</button>
<button class="emoji-btn">ğŸ¶</button>
<button class="emoji-btn">ğŸ±</button>
<button class="emoji-btn">ğŸ­</button>
<button class="emoji-btn">ğŸ¹</button>
<button class="emoji-btn">ğŸ°</button>
<button class="emoji-btn">ğŸ¦Š</button>
<button class="emoji-btn">ğŸ»</button>
<button class="emoji-btn">ğŸ¼</button>
<button class="emoji-btn">ğŸ»â€â„ï¸</button>
<button class="emoji-btn">ğŸ¨</button>
<button class="emoji-btn">ğŸ¯</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ®</button>
<button class="emoji-btn">ğŸ·</button>
<button class="emoji-btn">ğŸ½</button>
<button class="emoji-btn">ğŸ¸</button>
<button class="emoji-btn">ğŸµ</button>
<button class="emoji-btn">ğŸ™ˆ</button>
<button class="emoji-btn">ğŸ™‰</button>
<button class="emoji-btn">ğŸ™Š</button>
<button class="emoji-btn">ğŸ’</button>
<button class="emoji-btn">ğŸ”</button>
<button class="emoji-btn">ğŸ§</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ¦â€â¬›</button>
<button class="emoji-btn">ğŸ¤</button>
<button class="emoji-btn">ğŸ£</button>
<button class="emoji-btn">ğŸ¥</button>
<button class="emoji-btn">ğŸ¦†</button>
<button class="emoji-btn">ğŸ¦…</button>
<button class="emoji-btn">ğŸ¦‰</button>
<button class="emoji-btn">ğŸ¦‡</button>
<button class="emoji-btn">ğŸº</button>
<button class="emoji-btn">ğŸ—</button>
<button class="emoji-btn">ğŸ´</button>
<button class="emoji-btn">ğŸ¦„</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸª±</button>
<button class="emoji-btn">ğŸ›</button>
<button class="emoji-btn">ğŸ¦‹</button>
<button class="emoji-btn">ğŸŒ</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸœ</button>
<button class="emoji-btn">ğŸª°</button>
<button class="emoji-btn">ğŸª²</button>
<button class="emoji-btn">ğŸª³</button>
<button class="emoji-btn">ğŸ¦Ÿ</button>
<button class="emoji-btn">ğŸ¦—</button>
<button class="emoji-btn">ğŸ•·</button>
<button class="emoji-btn">ğŸ•¸</button>
<button class="emoji-btn">ğŸ¦‚</button>
<button class="emoji-btn">ğŸ¢</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ¦–</button>
<button class="emoji-btn">ğŸ¦•</button>
<button class="emoji-btn">ğŸ™</button>
<button class="emoji-btn">ğŸ¦‘</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ¦€</button>
<button class="emoji-btn">ğŸª¼</button>
<button class="emoji-btn">ğŸª¸</button>
<button class="emoji-btn">ğŸ¡</button>
<button class="emoji-btn">ğŸ </button>
<button class="emoji-btn">ğŸŸ</button>
<button class="emoji-btn">ğŸ¬</button>
<button class="emoji-btn">ğŸ³</button>
<button class="emoji-btn">ğŸ‹</button>
<button class="emoji-btn">ğŸ¦ˆ</button>
<button class="emoji-btn">ğŸŠ</button>
<button class="emoji-btn">ğŸ…</button>
<button class="emoji-btn">ğŸ†</button>
<button class="emoji-btn">ğŸ¦“</button>
<button class="emoji-btn">ğŸ«</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ¦§</button>
<button class="emoji-btn">ğŸ¦£</button>
<button class="emoji-btn">ğŸ˜</button>
<button class="emoji-btn">ğŸ¦›</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸª</button>
<button class="emoji-btn">ğŸ«</button>
<button class="emoji-btn">ğŸ¦’</button>
<button class="emoji-btn">ğŸ¦˜</button>
<button class="emoji-btn">ğŸ¦¬</button>
<button class="emoji-btn">ğŸƒ</button>
<button class="emoji-btn">ğŸ‚</button>
<button class="emoji-btn">ğŸ„</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸ–</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸ‘</button>
<button class="emoji-btn">ğŸ¦™</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸ¦Œ</button>
<button class="emoji-btn">ğŸ«</button>
<button class="emoji-btn">ğŸ•</button>
<button class="emoji-btn">ğŸ©</button>
<button class="emoji-btn">ğŸ¦®</button>
<button class="emoji-btn">ğŸ•â€ğŸ¦º</button>
<button class="emoji-btn">ğŸˆ</button>
<button class="emoji-btn">ğŸˆâ€â¬›</button>
<button class="emoji-btn">ğŸª½</button>
<button class="emoji-btn">ğŸª¶</button>
<button class="emoji-btn">ğŸ“</button>
<button class="emoji-btn">ğŸ¦ƒ</button>
<button class="emoji-btn">ğŸ¦¤</button>
<button class="emoji-btn">ğŸ¦š</button>
<button class="emoji-btn">ğŸ¦œ</button>
<button class="emoji-btn">ğŸ¦¢</button>
<button class="emoji-btn">ğŸª¿</button>
<button class="emoji-btn">ğŸ¦©</button>
<button class="emoji-btn">ğŸ•Š</button>
<button class="emoji-btn">ğŸ‡</button>
<button class="emoji-btn">ğŸ¦</button>
<button class="emoji-btn">ğŸ¦¨</button>
<button class="emoji-btn">ğŸ¦¡</button>
<button class="emoji-btn">ğŸ¦«</button>
<button class="emoji-btn">ğŸ¦¦</button>
<button class="emoji-btn">ğŸ¦¥</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸ€</button>
<button class="emoji-btn">ğŸ¿</button>
<button class="emoji-btn">ğŸ¦”</button>
<button class="emoji-btn">ğŸ¾</button>
<button class="emoji-btn">ğŸ‰</button>
<button class="emoji-btn">ğŸ²</button>
<button class="emoji-btn">ğŸ¦â€ğŸ”¥</button>
<button class="emoji-btn">ğŸŒµ</button>
<button class="emoji-btn">ğŸ„</button>
<button class="emoji-btn">ğŸŒ²</button>
<button class="emoji-btn">ğŸŒ³</button>
<button class="emoji-btn">ğŸª¾</button>
<button class="emoji-btn">ğŸŒ´</button>
<button class="emoji-btn">ğŸª¹</button>
<button class="emoji-btn">ğŸªº</button>
<button class="emoji-btn">ğŸªµ</button>
<button class="emoji-btn">ğŸŒ±</button>
<button class="emoji-btn">ğŸŒ¿</button>
<button class="emoji-btn">â˜˜ï¸</button>
<button class="emoji-btn">ğŸ€</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸª´</button>
<button class="emoji-btn">ğŸ‹</button>
<button class="emoji-btn">ğŸƒ</button>
<button class="emoji-btn">ğŸ‚</button>
<button class="emoji-btn">ğŸ</button>
<button class="emoji-btn">ğŸ„</button>
<button class="emoji-btn">ğŸ„â€ğŸŸ«</button>
<button class="emoji-btn">ğŸš</button>
<button class="emoji-btn">ğŸª¨</button>
<button class="emoji-btn">ğŸŒ¾</button>
<button class="emoji-btn">ğŸ’</button>
<button class="emoji-btn">ğŸŒ·</button>
<button class="emoji-btn">ğŸª·</button>
<button class="emoji-btn">ğŸŒ¹</button>
<button class="emoji-btn">ğŸ¥€</button>
<button class="emoji-btn">ğŸŒº</button>
<button class="emoji-btn">ğŸŒ¸</button>
<button class="emoji-btn">ğŸª»</button>
<button class="emoji-btn">ğŸŒ¼</button>
<button class="emoji-btn">ğŸŒ»</button>
<button class="emoji-btn">ğŸŒ</button>
<button class="emoji-btn">ğŸŒ</button>
<button class="emoji-btn">ğŸŒ›</button>
<button class="emoji-btn">ğŸŒœ</button>
<button class="emoji-btn">ğŸŒš</button>
<button class="emoji-btn">ğŸŒ•</button>
<button class="emoji-btn">ğŸŒ–</button>
<button class="emoji-btn">ğŸŒ—</button>
<button class="emoji-btn">ğŸŒ˜</button>
<button class="emoji-btn">ğŸŒ‘</button>
<button class="emoji-btn">ğŸŒ’</button>
<button class="emoji-btn">ğŸŒ“</button>
<button class="emoji-btn">ğŸŒ”</button>
<button class="emoji-btn">ğŸŒ™</button>
<button class="emoji-btn">ğŸŒ</button>
<button class="emoji-btn">ğŸŒ</button>
<button class="emoji-btn">ğŸŒ</button>
<button class="emoji-btn">ğŸª</button>
<button class="emoji-btn">ğŸ’«</button>
<button class="emoji-btn">â­ï¸</button>
<button class="emoji-btn">ğŸŒŸ</button>
<button class="emoji-btn">âœ¨</button>
<button class="emoji-btn">âš¡ï¸</button>
<button class="emoji-btn">â˜„ï¸</button>
<button class="emoji-btn">ğŸ’¥</button>
<button class="emoji-btn">ğŸ”¥</button>
<button class="emoji-btn">ğŸŒª</button>
<button class="emoji-btn">ğŸŒˆ</button>
<button class="emoji-btn">â˜€ï¸</button>
<button class="emoji-btn">ğŸŒ¤</button>
<button class="emoji-btn">â›…ï¸</button>
<button class="emoji-btn">ğŸŒ¥</button>
<button class="emoji-btn">â˜ï¸</button>
<button class="emoji-btn">ğŸŒ¦</button>
<button class="emoji-btn">ğŸŒ§</button>
<button class="emoji-btn">â›ˆ</button>
<button class="emoji-btn">ğŸŒ©
  <button class="emoji-btn">ğŸŒ¨</button>
  <button class="emoji-btn">â„ï¸</button>
  <button class="emoji-btn">â˜ƒï¸</button>
  <button class="emoji-btn">â›„ï¸</button>
  <button class="emoji-btn">ğŸŒ¬</button>
  <button class="emoji-btn">ğŸ’¨</button>
  <button class="emoji-btn">ğŸ’§</button>
  <button class="emoji-btn">ğŸ’¦</button>
  <button class="emoji-btn">ğŸ«§</button>
  <button class="emoji-btn">â˜”ï¸</button>
  <button class="emoji-btn">â˜‚ï¸</button>
  <button class="emoji-btn">ğŸŒŠ</button>
  <button class="emoji-btn">âœŒğŸ½</button>
  <button class="emoji-btn">ğŸ¤ğŸ½</button>
  <button class="emoji-btn">ğŸ«°ğŸ½</button>
  <button class="emoji-btn">ğŸ¤ŸğŸ½</button>
  <button class="emoji-btn">ğŸ¤˜ğŸ½</button>
  <button class="emoji-btn">ğŸ¤™ğŸ½</button>
      <!-- Add more emojis as you like -->
    </div>
  
    <div class="inputs">
      <input type="text" rows="3" placeholder="Message" name="message" id="message" />
      <button type="button" name="send" id="send-btn" onClick="sendMessage()">Send</button>
    </div>
  </div>
</div>

<script type="text/javascript">
  var socketio = io();

  const messages = document.getElementById("messages");
  const userList = document.getElementById("user-list");

  // Function to detect URLs in a message and turn them into clickable links
  const createMessage = (name, msg) => {
    const urlRegex = /(https?:\/\/[^\s]+)/g; // Regex to detect URLs

    // Replace URLs in the message with anchor tags
    msg = msg.replace(urlRegex, '<a href="$&" target="_blank" class="chat-link" onclick="openPopup(event, this.href)">$&</a>');

    const content = `
      <div class="text">
        <span><strong>${name}</strong>: ${msg}</span>
        <span class="muted">${new Date().toLocaleString()}</span>
      </div>
    `;
    messages.innerHTML += content;
  };

  const updateUserList = (users) => {
    userList.innerHTML = ""; // Clear current list
    users.forEach((user) => {
      const li = document.createElement("li");
      li.textContent = user;
      userList.appendChild(li);
    });
  };

  // Get the name from the page (assuming you have passed the `name` to the page)
  const username = "{{ name }}";  // Passed from the server (via Flask)

  // Emit the 'join' event with the username
  socketio.emit("join", username);

  socketio.on("message", (data) => {
    createMessage(data.name, data.message);
  });

  socketio.on("updateUserList", (users) => {
    updateUserList(users);
  });

  const sendMessage = () => {
    const message = document.getElementById("message");
    if (message.value == "") return;
    socketio.emit("message", { data: message.value });
    message.value = "";
  };

  // Event listener to handle 'Enter' key
  document.getElementById('message').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      event.preventDefault();  // Prevent the default form submission or newline
      sendMessage();  // Trigger sendMessage function
    }
  });

  // Function to open the link in a popup window
  function openPopup(event, url) {
    event.preventDefault(); // Prevent the default anchor behavior
    window.open(url, 'popup', 'width=600,height=400,scrollbars=yes,resizable=yes');
  }

  // Emoji button toggle visibility
  const emojiBtn = document.getElementById("emojiBtn");
  const emojiContainer = document.getElementById("emojiContainer");

  emojiBtn.addEventListener("click", () => {
    // Toggle visibility of emoji container
    if (emojiContainer.style.display === "none") {
      emojiContainer.style.display = "block";
    } else {
      emojiContainer.style.display = "none";
    }
  });

  // Add selected emoji to message input
  const emojiButtons = document.querySelectorAll(".emoji-btn");
  emojiButtons.forEach(button => {
    button.addEventListener("click", () => {
      const messageInput = document.getElementById("message");
      messageInput.value += button.textContent;  // Add emoji to message
      emojiContainer.style.display = "none";  // Hide emoji container after selection
    });
  });
</script>

{% for msg in messages %}
<script type="text/javascript">
  createMessage("{{ msg.name }}", "{{ msg.message }}");
</script>
<script src="script.js"></script>
{% endfor %}

{% endblock %}
